(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85667,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(70703),l=e.i(78094),a=e.i(64659),o=e.i(55900),i=e.i(36300);let d=(0,s.default)(()=>e.A(26187),{loadableGenerated:{modules:[64660]},ssr:!1});function n({data:e}){let s=(0,r.useRef)(null),n=(0,r.useRef)(null),[c,x]=(0,r.useState)({width:800,height:600}),[u,g]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=()=>{if(n.current){let{width:e,height:t}=n.current.getBoundingClientRect();x({width:e,height:Math.max(t,500)})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(s.current&&e){let e=s.current;e.d3Force("charge").strength(-30).distanceMax(100),e.d3Force("link").distance(e=>e.target?.id?.startsWith("cluster-hub")?150:30),setTimeout(()=>{e.zoomToFit(400,50)},200)}},[e]);let h=(0,r.useMemo)(()=>{let t=e.clusters.map(e=>({id:`cluster-hub-${e.id}`,text:(0,i.getClusterLabel)(e,{maxWords:2}),cluster:e.id,val:20,color:e.color,isClusterNode:!0})),r=e.nodes.map(t=>({...t,id:t.id,val:5,color:void 0!==t.cluster&&e.clusters.find(e=>e.id===t.cluster)?.color||"#999",isClusterNode:!1})),s=e.nodes.map(t=>({source:`cluster-hub-${t.cluster}`,target:t.id,value:2,color:e.clusters.find(e=>e.id===t.cluster)?.color})),l=t.map(e=>({source:"root-center",target:e.id,value:1,color:"transparent",isInvisible:!0}));return{nodes:[{id:"root-center",text:"",cluster:-1,val:1,color:"transparent",isClusterNode:!1,isRoot:!0,fx:0,fy:0},...t,...r],links:[...l,...s]}},[e]);return(0,t.jsxs)("div",{ref:n,className:"relative h-full min-h-[500px] bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-lg",children:[(0,t.jsx)("div",{className:"absolute top-4 left-4 z-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg px-3 py-2 shadow-md",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Network,{className:"w-4 h-4 text-primary"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.totalTokens," nodes â€¢ ",e.links.length," connections"]})]})}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 z-10 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg max-w-md border border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50/50 dark:hover:bg-gray-700/30 rounded-t-lg",onClick:()=>g(!u),children:[(0,t.jsxs)("h3",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:["Clusters (",e.clusters.length,")"]}),(0,t.jsx)("button",{className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:u?(0,t.jsx)(o.ChevronUp,{className:"w-4 h-4"}):(0,t.jsx)(a.ChevronDown,{className:"w-4 h-4"})})]}),u&&(0,t.jsx)("div",{className:"p-3 pt-0 border-t border-gray-100 dark:border-gray-700/50 space-y-2 max-h-96 overflow-y-auto",children:e.clusters.map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-2 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pointer-events-auto",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full mt-0.5 flex-shrink-0",style:{backgroundColor:e.color}}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:(0,i.getClusterLabel)(e)}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",e.size,")"]})]}),e.words.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.words.slice(0,3).map((e,r)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-[10px] bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-1.5 py-0.5 rounded",children:[(0,t.jsx)("span",{className:"font-medium",children:e.text}),(0,t.jsx)("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:e.weight.toFixed(1)})]},r))})]})]},e.id))})]}),(0,t.jsx)(d,{ref:s,graphData:h,width:c.width,height:c.height,nodeLabel:e=>e.isRoot?"":e.isClusterNode?`
                 <div style="background: rgba(0,0,0,0.9); color: white; padding: 6px 10px; border-radius: 4px; font-size: 14px; font-weight: bold; border: 1px solid ${e.color}">
                   ${e.text}
                 </div>
               `:`
             <div style="background: rgba(255,255,255,0.9); color: black; padding: 4px 8px; border-radius: 4px; font-size: 12px; border: 1px solid #ccc">
               ${e.text}
             </div>
           `,nodeColor:e=>e.color,nodeVal:e=>e.val||1,nodeRelSize:4,linkColor:e=>e.isInvisible?"transparent":e.color||"rgba(150, 150, 150, 0.2)",linkWidth:e=>e.value?.5*e.value:1,linkDirectionalParticles:0,backgroundColor:"transparent",enableNodeDrag:!0,enableZoomInteraction:!0,enablePanInteraction:!0,cooldownTicks:100,onEngineStop:()=>s.current?.zoomToFit(400,50),nodeCanvasObject:(e,t,r)=>{if(e.isRoot)return;let s=e.text,l=e.isClusterNode?16/r:12/r;t.font=`${e.isClusterNode?"bold":""} ${l}px Sans-Serif`,e.isClusterNode?(t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.val||5,0,2*Math.PI),t.fill(),t.textAlign="center",t.textBaseline="middle",t.fillStyle="white",t.fillStyle=e.color,t.lineWidth=3/r,t.strokeStyle="#fff",t.strokeText(s,e.x,e.y+(e.val||5)+l),t.fillText(s,e.x,e.y+(e.val||5)+l)):(t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.val||2,0,2*Math.PI),t.fill(),r>2&&(t.textAlign="center",t.textBaseline="top",t.fillStyle="#666",t.font=`${10/r}px Sans-Serif`,t.fillText(s,e.x,e.y+(e.val||2)+2)))},nodeCanvasObjectMode:()=>"replace"})]})}e.s(["default",()=>n])},72254,e=>{e.n(e.i(85667))},26187,e=>{e.v(t=>Promise.all(["static/chunks/003e7aa1adfe577d.js","static/chunks/9c1c2c419416d64e.js"].map(t=>e.l(t))).then(()=>t(64660)))}]);