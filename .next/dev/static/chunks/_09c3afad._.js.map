{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/lib/cluster-utils.ts"],"sourcesContent":["import { ClusterInfo } from '@/lib/types';\n\n/**\n * Generates a descriptive label for a cluster based on its top words.\n * Falls back to \"Cluster {id}\" if no words are available.\n * \n * @param cluster The cluster object\n * @param options Options for formatting\n * @returns A string label for the cluster\n */\nexport function getClusterLabel(cluster: ClusterInfo, options?: { maxWords?: number, separator?: string }): string {\n  if (!cluster.words || cluster.words.length === 0) {\n    return `Cluster ${cluster.id}`;\n  }\n\n  const { maxWords = 3, separator = ' ' } = options || {};\n\n  // Sort words by weight to get the most representative ones\n  const sortedWords = [...cluster.words].sort((a, b) => b.weight - a.weight);\n  \n  // Get top words\n  const topWords = sortedWords.slice(0, maxWords).map(w => w.text);\n\n  if (topWords.length === 0) {\n    return `Cluster ${cluster.id}`;\n  }\n\n  // Capitalize first letter of each word\n  const capitalizedWords = topWords.map(w => w.charAt(0).toUpperCase() + w.slice(1));\n  \n  return capitalizedWords.join(separator);\n}\n"],"names":[],"mappings":";;;;AAUO,SAAS,gBAAgB,OAAoB,EAAE,OAAmD;IACvG,IAAI,CAAC,QAAQ,KAAK,IAAI,QAAQ,KAAK,CAAC,MAAM,KAAK,GAAG;QAChD,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;IAChC;IAEA,MAAM,EAAE,WAAW,CAAC,EAAE,YAAY,GAAG,EAAE,GAAG,WAAW,CAAC;IAEtD,2DAA2D;IAC3D,MAAM,cAAc;WAAI,QAAQ,KAAK;KAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,MAAM,GAAG,EAAE,MAAM;IAEzE,gBAAgB;IAChB,MAAM,WAAW,YAAY,KAAK,CAAC,GAAG,UAAU,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;IAE/D,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;IAChC;IAEA,uCAAuC;IACvC,MAAM,mBAAmB,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM,CAAC,GAAG,WAAW,KAAK,EAAE,KAAK,CAAC;IAE/E,OAAO,iBAAiB,IAAI,CAAC;AAC/B"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/components/visualizations/BubbleChartVisualization.tsx"],"sourcesContent":["'use client';\n\nimport { ClusterResult } from '@/lib/types';\nimport { getClusterLabel } from '@/lib/cluster-utils';\n\ninterface BubbleChartVisualizationProps {\n  data: ClusterResult;\n}\n\nexport default function BubbleChartVisualization({ data }: BubbleChartVisualizationProps) {\n  // Calculate bubble positions and sizes\n  const maxSize = Math.max(...data.clusters.map(c => c.size));\n  \n  return (\n    <div className=\"w-full h-full bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 p-6\">\n      <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4\">\n        Cluster Sizes\n      </h3>\n      <div className=\"relative w-full h-[500px] flex items-center justify-center\">\n        <div className=\"flex flex-wrap gap-4 items-center justify-center\">\n          {/* Use a shuffled copy of clusters to randomize layout */}\n          {[...data.clusters]\n            .sort((a, b) => {\n               // Deterministic pseudo-random sort based on ID to ensure consistent but \"random\" order across renders\n               const hashA = (a.id * 9301 + 49297) % 233280;\n               const hashB = (b.id * 9301 + 49297) % 233280;\n               return hashA - hashB;\n            })\n            .map(cluster => {\n            const size = 60 + (cluster.size / maxSize) * 140; // 60-200px\n            \n            return (\n              <div\n                key={cluster.id}\n                className=\"relative group cursor-pointer transition-transform hover:scale-110\"\n                style={{\n                  width: `${size}px`,\n                  height: `${size}px`,\n                }}\n              >\n                <div\n                  className=\"w-full h-full rounded-full flex items-center justify-center shadow-lg transition-all duration-300 group-hover:shadow-xl group-hover:brightness-110\"\n                  style={{\n                    backgroundColor: cluster.color,\n                    opacity: 0.8,\n                  }}\n                >\n                  <div className=\"text-center text-white px-2 overflow-hidden w-full\">\n                    <div className=\"font-bold text-sm md:text-base leading-tight truncate\">\n                      {getClusterLabel(cluster, { maxWords: 1 })}\n                    </div>\n                    {size > 100 && (\n                      <div className=\"text-[10px] md:text-xs opacity-90 mt-0.5 font-medium\">\n                        {cluster.size} items\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Tooltip on hover */}\n                <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block z-10\">\n                  <div className=\"bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-xl\">\n                    <div className=\"font-semibold mb-1\">{getClusterLabel(cluster)}</div>\n                    <div>{cluster.size} items</div>\n                    {cluster.words.slice(0, 3).map((word, idx) => (\n                      <div key={idx} className=\"text-gray-300 dark:text-gray-600\">\n                        {word.text}: {word.weight.toFixed(2)}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AASe,SAAS,yBAAyB,EAAE,IAAI,EAAiC;IACtF,uCAAuC;IACvC,MAAM,UAAU,KAAK,GAAG,IAAI,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;IAEzD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA8D;;;;;;0BAG5E,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BAEZ;2BAAI,KAAK,QAAQ;qBAAC,CAChB,IAAI,CAAC,CAAC,GAAG;wBACP,sGAAsG;wBACtG,MAAM,QAAQ,CAAC,EAAE,EAAE,GAAG,OAAO,KAAK,IAAI;wBACtC,MAAM,QAAQ,CAAC,EAAE,EAAE,GAAG,OAAO,KAAK,IAAI;wBACtC,OAAO,QAAQ;oBAClB,GACC,GAAG,CAAC,CAAA;wBACL,MAAM,OAAO,KAAK,AAAC,QAAQ,IAAI,GAAG,UAAW,KAAK,WAAW;wBAE7D,qBACE,6LAAC;4BAEC,WAAU;4BACV,OAAO;gCACL,OAAO,GAAG,KAAK,EAAE,CAAC;gCAClB,QAAQ,GAAG,KAAK,EAAE,CAAC;4BACrB;;8CAEA,6LAAC;oCACC,WAAU;oCACV,OAAO;wCACL,iBAAiB,QAAQ,KAAK;wCAC9B,SAAS;oCACX;8CAEA,cAAA,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACZ,IAAA,6IAAe,EAAC,SAAS;oDAAE,UAAU;gDAAE;;;;;;4CAEzC,OAAO,qBACN,6LAAC;gDAAI,WAAU;;oDACZ,QAAQ,IAAI;oDAAC;;;;;;;;;;;;;;;;;;8CAOtB,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DAAsB,IAAA,6IAAe,EAAC;;;;;;0DACrD,6LAAC;;oDAAK,QAAQ,IAAI;oDAAC;;;;;;;4CAClB,QAAQ,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,oBACpC,6LAAC;oDAAc,WAAU;;wDACtB,KAAK,IAAI;wDAAC;wDAAG,KAAK,MAAM,CAAC,OAAO,CAAC;;mDAD1B;;;;;;;;;;;;;;;;;2BAhCX,QAAQ,EAAE;;;;;oBAwCrB;;;;;;;;;;;;;;;;;AAKV;KArEwB"}}]
}