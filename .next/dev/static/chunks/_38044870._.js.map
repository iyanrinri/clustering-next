{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/lib/cluster-utils.ts"],"sourcesContent":["import { ClusterInfo } from '@/lib/types';\n\n/**\n * Generates a descriptive label for a cluster based on its top words.\n * Falls back to \"Cluster {id}\" if no words are available.\n * \n * @param cluster The cluster object\n * @param options Options for formatting\n * @returns A string label for the cluster\n */\nexport function getClusterLabel(cluster: ClusterInfo, options?: { maxWords?: number, separator?: string }): string {\n  if (!cluster.words || cluster.words.length === 0) {\n    return `Cluster ${cluster.id}`;\n  }\n\n  const { maxWords = 3, separator = ' ' } = options || {};\n\n  // Sort words by weight to get the most representative ones\n  const sortedWords = [...cluster.words].sort((a, b) => b.weight - a.weight);\n  \n  // Get top words\n  const topWords = sortedWords.slice(0, maxWords).map(w => w.text);\n\n  if (topWords.length === 0) {\n    return `Cluster ${cluster.id}`;\n  }\n\n  // Capitalize first letter of each word\n  const capitalizedWords = topWords.map(w => w.charAt(0).toUpperCase() + w.slice(1));\n  \n  return capitalizedWords.join(separator);\n}\n"],"names":[],"mappings":";;;;AAUO,SAAS,gBAAgB,OAAoB,EAAE,OAAmD;IACvG,IAAI,CAAC,QAAQ,KAAK,IAAI,QAAQ,KAAK,CAAC,MAAM,KAAK,GAAG;QAChD,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;IAChC;IAEA,MAAM,EAAE,WAAW,CAAC,EAAE,YAAY,GAAG,EAAE,GAAG,WAAW,CAAC;IAEtD,2DAA2D;IAC3D,MAAM,cAAc;WAAI,QAAQ,KAAK;KAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,MAAM,GAAG,EAAE,MAAM;IAEzE,gBAAgB;IAChB,MAAM,WAAW,YAAY,KAAK,CAAC,GAAG,UAAU,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;IAE/D,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;IAChC;IAEA,uCAAuC;IACvC,MAAM,mBAAmB,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM,CAAC,GAAG,WAAW,KAAK,EAAE,KAAK,CAAC;IAE/E,OAAO,iBAAiB,IAAI,CAAC;AAC/B"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/components/visualizations/ScatterPlotVisualization.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { ClusterResult } from '@/lib/types';\nimport { ScatterChart, Scatter, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell } from 'recharts';\nimport { getClusterLabel } from '@/lib/cluster-utils';\n\ninterface ScatterPlotVisualizationProps {\n  data: ClusterResult;\n}\n\nexport default function ScatterPlotVisualization({ data }: ScatterPlotVisualizationProps) {\n  // Use useMemo to ensure stable values\n  const scatterData = useMemo(() => {\n    return data.nodes.map((node, idx) => {\n      // Simple deterministic pseudo-random based on index and text length\n      const seed = idx * 1337 + node.text.length;\n      const pseudoRandom = (input: number) => {\n        const x = Math.sin(input) * 10000;\n        return x - Math.floor(x);\n      };\n      \n      return {\n        x: pseudoRandom(seed) * 100, \n        y: pseudoRandom(seed + 1) * 100,\n        cluster: node.cluster,\n        text: node.text,\n        color: data.clusters.find(c => c.id === node.cluster)?.color || '#3b82f6',\n      };\n    });\n  }, [data]);\n\n  return (\n    <div className=\"w-full h-full bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 p-4\">\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <ScatterChart margin={{ top: 20, right: 20, bottom: 20, left: 20 }}>\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\n          <XAxis \n            type=\"number\" \n            dataKey=\"x\" \n            name=\"PC1\"\n            stroke=\"#6b7280\"\n          />\n          <YAxis \n            type=\"number\" \n            dataKey=\"y\" \n            name=\"PC2\"\n            stroke=\"#6b7280\"\n          />\n          <Tooltip \n            cursor={{ strokeDasharray: '3 3' }}\n            content={({ active, payload }) => {\n              if (active && payload && payload.length) {\n                const payloadData = payload[0].payload;\n                // Find cluster info\n                const cluster = data.clusters.find(c => c.id === payloadData.cluster);\n                const clusterName = cluster ? getClusterLabel(cluster) : `Cluster ${payloadData.cluster}`;\n\n                return (\n                  <div className=\"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700\">\n                    <p className=\"text-sm font-semibold text-gray-900 dark:text-gray-100 border-b border-gray-100 dark:border-gray-700 pb-1 mb-1\">\n                      {clusterName}\n                    </p>\n                    <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                      {payloadData.text}\n                    </p>\n                  </div>\n                );\n              }\n              return null;\n            }}\n          />\n          <Scatter data={scatterData} fill=\"#8884d8\">\n            {scatterData.map((entry, index) => (\n              <Cell key={`cell-${index}`} fill={entry.color} />\n            ))}\n          </Scatter>\n        </ScatterChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AALA;;;;AAWe,SAAS,yBAAyB,EAAE,IAAI,EAAiC;;IACtF,sCAAsC;IACtC,MAAM,cAAc,IAAA,wKAAO;yDAAC;YAC1B,OAAO,KAAK,KAAK,CAAC,GAAG;iEAAC,CAAC,MAAM;oBAC3B,oEAAoE;oBACpE,MAAM,OAAO,MAAM,OAAO,KAAK,IAAI,CAAC,MAAM;oBAC1C,MAAM;sFAAe,CAAC;4BACpB,MAAM,IAAI,KAAK,GAAG,CAAC,SAAS;4BAC5B,OAAO,IAAI,KAAK,KAAK,CAAC;wBACxB;;oBAEA,OAAO;wBACL,GAAG,aAAa,QAAQ;wBACxB,GAAG,aAAa,OAAO,KAAK;wBAC5B,SAAS,KAAK,OAAO;wBACrB,MAAM,KAAK,IAAI;wBACf,OAAO,KAAK,QAAQ,CAAC,IAAI;6EAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,OAAO;6EAAG,SAAS;oBAClE;gBACF;;QACF;wDAAG;QAAC;KAAK;IAET,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,6LAAmB;YAAC,OAAM;YAAO,QAAO;sBACvC,cAAA,6LAAC,2KAAY;gBAAC,QAAQ;oBAAE,KAAK;oBAAI,OAAO;oBAAI,QAAQ;oBAAI,MAAM;gBAAG;;kCAC/D,6LAAC,iLAAa;wBAAC,iBAAgB;wBAAM,QAAO;;;;;;kCAC5C,6LAAC,iKAAK;wBACJ,MAAK;wBACL,SAAQ;wBACR,MAAK;wBACL,QAAO;;;;;;kCAET,6LAAC,iKAAK;wBACJ,MAAK;wBACL,SAAQ;wBACR,MAAK;wBACL,QAAO;;;;;;kCAET,6LAAC,qKAAO;wBACN,QAAQ;4BAAE,iBAAiB;wBAAM;wBACjC,SAAS,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;4BAC3B,IAAI,UAAU,WAAW,QAAQ,MAAM,EAAE;gCACvC,MAAM,cAAc,OAAO,CAAC,EAAE,CAAC,OAAO;gCACtC,oBAAoB;gCACpB,MAAM,UAAU,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,YAAY,OAAO;gCACpE,MAAM,cAAc,UAAU,IAAA,6IAAe,EAAC,WAAW,CAAC,QAAQ,EAAE,YAAY,OAAO,EAAE;gCAEzF,qBACE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;sDACV;;;;;;sDAEH,6LAAC;4CAAE,WAAU;sDACV,YAAY,IAAI;;;;;;;;;;;;4BAIzB;4BACA,OAAO;wBACT;;;;;;kCAEF,6LAAC,qKAAO;wBAAC,MAAM;wBAAa,MAAK;kCAC9B,YAAY,GAAG,CAAC,CAAC,OAAO,sBACvB,6LAAC,+JAAI;gCAAuB,MAAM,MAAM,KAAK;+BAAlC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxC;GAtEwB;KAAA"}}]
}