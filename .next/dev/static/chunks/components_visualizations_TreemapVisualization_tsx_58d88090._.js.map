{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/components/visualizations/TreemapVisualization.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { ResponsiveContainer, Treemap, Tooltip } from 'recharts';\nimport { ClusterResult } from '@/lib/types';\nimport { getClusterLabel } from '@/lib/cluster-utils';\n\ninterface TreemapVisualizationProps {\n  data: ClusterResult;\n}\n\n// Custom content renderer for Treemap tiles\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst CustomizedContent = (props: any) => {\n  const { x, y, width, height, payload, depth, name, size, fill } = props;\n\n  // Safety check to ensure we don't crash if props are missing\n  if (!width || !height) return null;\n\n  return (\n    <g>\n      <rect\n        x={x}\n        y={y}\n        width={width}\n        height={height}\n        style={{\n          fill: (payload && payload.fill) || fill || '#8884d8',\n          stroke: '#fff',\n          strokeWidth: 2 / (depth + 1e-10),\n          strokeOpacity: 1 / (depth + 1e-10),\n        }}\n      />\n      {depth > 0 && width > 50 && height > 50 && (\n         <foreignObject x={x} y={y} width={width} height={height}>\n          <div className=\"flex flex-col items-center justify-center w-full h-full p-2 text-center overflow-hidden\">\n             <span className=\"text-white font-bold text-sm leading-tight line-clamp-2\">\n               {name}\n             </span>\n             <span className=\"text-white/80 text-xs mt-1\">\n               {size}\n             </span>\n          </div>\n        </foreignObject>\n      )}\n    </g>\n  );\n};\n\nexport default function TreemapVisualization({ data }: TreemapVisualizationProps) {\n  \n  const treeData = useMemo(() => {\n    if (!data || !data.clusters) return [];\n\n    return data.clusters.map(cluster => {\n      const clusterName = getClusterLabel(cluster);\n\n      return {\n        name: clusterName,\n        size: cluster.size,\n        fill: cluster.color, \n      };\n    });\n  }, [data]);\n\n  return (\n    <div className=\"w-full h-full bg-slate-900 rounded-xl border border-slate-800 p-4 overflow-hidden relative\">\n        <div className=\"absolute top-4 left-0 right-0 text-center z-10 pointer-events-none\">\n            <h3 className=\"text-white font-semibold\">Cluster Distribution</h3>\n        </div>\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <Treemap\n            data={treeData}\n            dataKey=\"size\"\n            aspectRatio={4 / 3}\n            stroke=\"#fff\"\n            fill=\"#8884d8\"\n            content={<CustomizedContent />}\n          >\n             <Tooltip \n                content={({ active, payload }) => {\n                  if (active && payload && payload.length) {\n                    const data = payload[0].payload;\n                    return (\n                      <div className=\"bg-slate-800 border border-slate-700 p-2 rounded shadow-xl text-white text-xs\">\n                        <p className=\"font-bold\">{data.name}</p>\n                        <p>Size: {data.size}</p>\n                      </div>\n                    );\n                  }\n                  return null;\n                }}\n             />\n          </Treemap>\n        </ResponsiveContainer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAEA;;;AALA;;;;AAWA,4CAA4C;AAC5C,8DAA8D;AAC9D,MAAM,oBAAoB,CAAC;IACzB,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG;IAElE,6DAA6D;IAC7D,IAAI,CAAC,SAAS,CAAC,QAAQ,OAAO;IAE9B,qBACE,6LAAC;;0BACC,6LAAC;gBACC,GAAG;gBACH,GAAG;gBACH,OAAO;gBACP,QAAQ;gBACR,OAAO;oBACL,MAAM,AAAC,WAAW,QAAQ,IAAI,IAAK,QAAQ;oBAC3C,QAAQ;oBACR,aAAa,IAAI,CAAC,QAAQ,KAAK;oBAC/B,eAAe,IAAI,CAAC,QAAQ,KAAK;gBACnC;;;;;;YAED,QAAQ,KAAK,QAAQ,MAAM,SAAS,oBAClC,6LAAC;gBAAc,GAAG;gBAAG,GAAG;gBAAG,OAAO;gBAAO,QAAQ;0BAChD,cAAA,6LAAC;oBAAI,WAAU;;sCACZ,6LAAC;4BAAK,WAAU;sCACb;;;;;;sCAEH,6LAAC;4BAAK,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOhB;KAlCM;AAoCS,SAAS,qBAAqB,EAAE,IAAI,EAA6B;;IAE9E,MAAM,WAAW,IAAA,wKAAO;kDAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE,OAAO,EAAE;YAEtC,OAAO,KAAK,QAAQ,CAAC,GAAG;0DAAC,CAAA;oBACvB,MAAM,cAAc,IAAA,6IAAe,EAAC;oBAEpC,OAAO;wBACL,MAAM;wBACN,MAAM,QAAQ,IAAI;wBAClB,MAAM,QAAQ,KAAK;oBACrB;gBACF;;QACF;iDAAG;QAAC;KAAK;IAET,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAG,WAAU;8BAA2B;;;;;;;;;;;0BAE7C,6LAAC,6LAAmB;gBAAC,OAAM;gBAAO,QAAO;0BACvC,cAAA,6LAAC,iKAAO;oBACN,MAAM;oBACN,SAAQ;oBACR,aAAa,IAAI;oBACjB,QAAO;oBACP,MAAK;oBACL,uBAAS,6LAAC;;;;;8BAET,cAAA,6LAAC,qKAAO;wBACL,SAAS,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;4BAC3B,IAAI,UAAU,WAAW,QAAQ,MAAM,EAAE;gCACvC,MAAM,OAAO,OAAO,CAAC,EAAE,CAAC,OAAO;gCAC/B,qBACE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;sDAAa,KAAK,IAAI;;;;;;sDACnC,6LAAC;;gDAAE;gDAAO,KAAK,IAAI;;;;;;;;;;;;;4BAGzB;4BACA,OAAO;wBACT;;;;;;;;;;;;;;;;;;;;;;AAMhB;GAhDwB;MAAA"}}]
}