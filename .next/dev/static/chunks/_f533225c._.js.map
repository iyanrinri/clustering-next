{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/utils/colors.ts"],"sourcesContent":["// Color palette generator for cluster visualization\nimport { schemeCategory10, schemeSet3, schemePaired } from 'd3-scale-chromatic';\n\nexport const clusterColors = [\n  '#3b82f6', // Blue\n  '#8b5cf6', // Purple\n  '#ec4899', // Pink\n  '#f59e0b', // Amber\n  '#10b981', // Emerald\n  '#06b6d4', // Cyan\n  '#f97316', // Orange\n  '#6366f1', // Indigo\n  '#14b8a6', // Teal\n  '#ef4444', // Red\n  '#84cc16', // Lime\n  '#a855f7', // Violet\n];\n\nexport function getClusterColor(clusterId: number): string {\n  return clusterColors[clusterId % clusterColors.length];\n}\n\nexport function generateColorPalette(numClusters: number): string[] {\n  if (numClusters <= clusterColors.length) {\n    return clusterColors.slice(0, numClusters);\n  }\n  \n  // For more clusters, use d3 color schemes\n  const colors: string[] = [];\n  const schemes = [schemeCategory10, schemeSet3, schemePaired];\n  \n  for (let i = 0; i < numClusters; i++) {\n    const schemeIndex = Math.floor(i / 10) % schemes.length;\n    const colorIndex = i % 10;\n    colors.push(schemes[schemeIndex][colorIndex]);\n  }\n  \n  return colors;\n}\n\nexport function getNodeColor(node: { cluster: number }, opacity: number = 1): string {\n  const baseColor = getClusterColor(node.cluster);\n  \n  if (opacity === 1) {\n    return baseColor;\n  }\n  \n  // Convert hex to rgba\n  const r = parseInt(baseColor.slice(1, 3), 16);\n  const g = parseInt(baseColor.slice(3, 5), 16);\n  const b = parseInt(baseColor.slice(5, 7), 16);\n  \n  return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA,oDAAoD;AACpD;AAAA;AAAA;;AAEO,MAAM,gBAAgB;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,SAAS,gBAAgB,SAAiB;IAC/C,OAAO,aAAa,CAAC,YAAY,cAAc,MAAM,CAAC;AACxD;AAEO,SAAS,qBAAqB,WAAmB;IACtD,IAAI,eAAe,cAAc,MAAM,EAAE;QACvC,OAAO,cAAc,KAAK,CAAC,GAAG;IAChC;IAEA,0CAA0C;IAC1C,MAAM,SAAmB,EAAE;IAC3B,MAAM,UAAU;QAAC,kPAAgB;QAAE,gOAAU;QAAE,sOAAY;KAAC;IAE5D,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,IAAK;QACpC,MAAM,cAAc,KAAK,KAAK,CAAC,IAAI,MAAM,QAAQ,MAAM;QACvD,MAAM,aAAa,IAAI;QACvB,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW;IAC9C;IAEA,OAAO;AACT;AAEO,SAAS,aAAa,IAAyB,EAAE,UAAkB,CAAC;IACzE,MAAM,YAAY,gBAAgB,KAAK,OAAO;IAE9C,IAAI,YAAY,GAAG;QACjB,OAAO;IACT;IAEA,sBAAsB;IACtB,MAAM,IAAI,SAAS,UAAU,KAAK,CAAC,GAAG,IAAI;IAC1C,MAAM,IAAI,SAAS,UAAU,KAAK,CAAC,GAAG,IAAI;IAC1C,MAAM,IAAI,SAAS,UAAU,KAAK,CAAC,GAAG,IAAI;IAE1C,OAAO,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC;AAC7C"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/lib/cluster-utils.ts"],"sourcesContent":["import { ClusterInfo } from '@/lib/types';\n\n/**\n * Generates a descriptive label for a cluster based on its top words.\n * Falls back to \"Cluster {id}\" if no words are available.\n * \n * @param cluster The cluster object\n * @param options Options for formatting\n * @returns A string label for the cluster\n */\nexport function getClusterLabel(cluster: ClusterInfo, options?: { maxWords?: number, separator?: string }): string {\n  if (!cluster.words || cluster.words.length === 0) {\n    return `Cluster ${cluster.id}`;\n  }\n\n  const { maxWords = 3, separator = ' ' } = options || {};\n\n  // Sort words by weight to get the most representative ones\n  const sortedWords = [...cluster.words].sort((a, b) => b.weight - a.weight);\n  \n  // Get top words\n  const topWords = sortedWords.slice(0, maxWords).map(w => w.text);\n\n  if (topWords.length === 0) {\n    return `Cluster ${cluster.id}`;\n  }\n\n  // Capitalize first letter of each word\n  const capitalizedWords = topWords.map(w => w.charAt(0).toUpperCase() + w.slice(1));\n  \n  return capitalizedWords.join(separator);\n}\n"],"names":[],"mappings":";;;;AAUO,SAAS,gBAAgB,OAAoB,EAAE,OAAmD;IACvG,IAAI,CAAC,QAAQ,KAAK,IAAI,QAAQ,KAAK,CAAC,MAAM,KAAK,GAAG;QAChD,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;IAChC;IAEA,MAAM,EAAE,WAAW,CAAC,EAAE,YAAY,GAAG,EAAE,GAAG,WAAW,CAAC;IAEtD,2DAA2D;IAC3D,MAAM,cAAc;WAAI,QAAQ,KAAK;KAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,MAAM,GAAG,EAAE,MAAM;IAEzE,gBAAgB;IAChB,MAAM,WAAW,YAAY,KAAK,CAAC,GAAG,UAAU,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;IAE/D,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;IAChC;IAEA,uCAAuC;IACvC,MAAM,mBAAmB,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM,CAAC,GAAG,WAAW,KAAK,EAAE,KAAK,CAAC;IAE/E,OAAO,iBAAiB,IAAI,CAAC;AAC/B"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/components/visualizations/ForceGraphVisualization.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport dynamic from 'next/dynamic';\nimport { ClusterResult } from '@/lib/types';\nimport { getNodeColor } from '@/utils/colors';\nimport { Network, ChevronDown, ChevronUp } from 'lucide-react';\nimport { getClusterLabel } from '@/lib/cluster-utils';\n\n// Dynamic import to prevent SSR issues with react-force-graph-2d\nconst ForceGraph2D = dynamic(() => import('react-force-graph-2d'), {\n  ssr: false,\n});\n\ninterface ForceGraphVisualizationProps {\n  data: ClusterResult;\n}\n\nexport default function ForceGraphVisualization({ data }: ForceGraphVisualizationProps) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const graphRef = useRef<any>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [dimensions, setDimensions] = useState({ width: 800, height: 600 });\n  const [isLegendOpen, setIsLegendOpen] = useState(true);\n\n  useEffect(() => {\n    const updateDimensions = () => {\n      if (containerRef.current) {\n        const { width, height } = containerRef.current.getBoundingClientRect();\n        setDimensions({ width, height: Math.max(height, 500) });\n      }\n    };\n\n    updateDimensions();\n    window.addEventListener('resize', updateDimensions);\n    return () => window.removeEventListener('resize', updateDimensions);\n  }, []);\n\n  useEffect(() => {\n    if (graphRef.current && data) {\n      // Zoom to fit after data loads\n      setTimeout(() => {\n        graphRef.current?.zoomToFit(400, 50);\n      }, 100);\n    }\n  }, [data]);\n\n  const graphData = {\n    nodes: data.nodes.map(node => ({\n      ...node,\n      color: getNodeColor(node, 1),\n    })),\n    links: data.links,\n  };\n\n  return (\n    <div ref={containerRef} className=\"relative h-full min-h-[500px] bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-lg\">\n      <div className=\"absolute top-4 left-4 z-10 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg px-3 py-2 shadow-md\">\n        <div className=\"flex items-center gap-2\">\n          <Network className=\"w-4 h-4 text-primary\" />\n          <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n            {data.totalTokens} nodes â€¢ {data.links.length} connections\n          </span>\n        </div>\n      </div>\n\n      {/* Cluster Legend */}\n      <div className=\"absolute top-4 right-4 z-10 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg max-w-md border border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out\">\n        <div \n          className=\"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50/50 dark:hover:bg-gray-700/30 rounded-t-lg\"\n          onClick={() => setIsLegendOpen(!isLegendOpen)}\n        >\n          <h3 className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">Clusters ({data.clusters.length})</h3>\n          <button className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\">\n            {isLegendOpen ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\n          </button>\n        </div>\n        \n        {isLegendOpen && (\n          <div className=\"p-3 pt-0 border-t border-gray-100 dark:border-gray-700/50 space-y-2 max-h-96 overflow-y-auto\">\n            {data.clusters.map(cluster => (\n              <div key={cluster.id} className=\"flex items-start gap-2 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pointer-events-auto\">\n                <div \n                  className=\"w-3 h-3 rounded-full mt-0.5 flex-shrink-0\"\n                  style={{ backgroundColor: cluster.color }}\n                />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n                      {getClusterLabel(cluster)}\n                    </span>\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                      ({cluster.size})\n                    </span>\n                  </div>\n                  {cluster.words.length > 0 && (\n                    <div className=\"flex flex-wrap gap-1\">\n                      {cluster.words.slice(0, 3).map((word, idx) => (\n                        <span\n                          key={idx}\n                          className=\"inline-flex items-center gap-1 text-[10px] bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-1.5 py-0.5 rounded\"\n                        >\n                          <span className=\"font-medium\">{word.text}</span>\n                          <span className=\"text-blue-600 dark:text-blue-400 font-bold\">\n                            {word.weight.toFixed(1)}\n                          </span>\n                        </span>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <ForceGraph2D\n        ref={graphRef}\n        graphData={graphData}\n        width={dimensions.width}\n        height={dimensions.height}\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        nodeLabel={(node: any) => {\n           const cluster = data.clusters.find(c => c.id === node.cluster);\n           const clusterName = cluster ? getClusterLabel(cluster) : `Cluster ${node.cluster}`;\n           return `\n             <div style=\"background: rgba(0,0,0,0.8); color: white; padding: 8px 12px; border-radius: 6px; font-size: 12px; max-width: 200px; font-family: sans-serif;\">\n               <div style=\"font-weight: bold; margin-bottom: 4px; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 4px;\">${clusterName}</div>\n               <div>${node.text}</div>\n             </div>\n           `;\n        }}\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        nodeColor={(node: any) => node.color}\n        nodeRelSize={6}\n        nodeVal={8}\n        linkColor={() => 'rgba(100, 116, 139, 0.3)'}\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        linkWidth={(link: any) => Math.max(1, (link.value || 1) * 3)}\n        linkDirectionalParticles={2}\n        linkDirectionalParticleWidth={2}\n        linkDirectionalParticleSpeed={0.005}\n        backgroundColor=\"transparent\"\n        enableNodeDrag={true}\n        enableZoomInteraction={true}\n        enablePanInteraction={true}\n        cooldownTicks={100}\n        onEngineStop={() => graphRef.current?.zoomToFit(400, 50)}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 430, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/node_modules/d3-scale-chromatic/src/colors.js"],"sourcesContent":["export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n"],"names":[],"mappings":";;;;AAAe,wCAAS,SAAS;IAC/B,IAAI,IAAI,UAAU,MAAM,GAAG,IAAI,GAAG,SAAS,IAAI,MAAM,IAAI,IAAI;IAC7D,MAAO,IAAI,EAAG,MAAM,CAAC,EAAE,GAAG,MAAM,UAAU,KAAK,CAAC,IAAI,GAAG,EAAE,IAAI;IAC7D,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/node_modules/d3-scale-chromatic/src/categorical/category10.js"],"sourcesContent":["import colors from \"../colors.js\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n"],"names":[],"mappings":";;;;AAAA;;uCAEe,IAAA,uKAAM,EAAC","ignoreList":[0]}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/node_modules/d3-scale-chromatic/src/categorical/Set3.js"],"sourcesContent":["import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n"],"names":[],"mappings":";;;;AAAA;;uCAEe,IAAA,uKAAM,EAAC","ignoreList":[0]}},
    {"offset": {"line": 483, "column": 0}, "map": {"version":3,"sources":["file:///Users/iyan/NodeStudio/clustering-next/node_modules/d3-scale-chromatic/src/categorical/Paired.js"],"sourcesContent":["import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n"],"names":[],"mappings":";;;;AAAA;;uCAEe,IAAA,uKAAM,EAAC","ignoreList":[0]}}]
}